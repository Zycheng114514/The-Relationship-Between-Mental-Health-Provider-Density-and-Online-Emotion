install.packages(pacman)
install.packages("packman")
install.packages("tidyverse")
install.packages(c("xml2", "httr", "ragg", "rvest", "googledrive", "googlesheets4"))
install.packages("tidyverse")
library(readr)
finalrun <- read_csv("Downloads/ws/td/replication/finalrun.csv")
View(finalrun)
library(readr)
AskChicago_submissions_keyword_matches <- read_csv("Downloads/ws/ds/data_science_final_project/data/output/AskChicago_submissions_keyword_matches.csv")
View(AskChicago_submissions_keyword_matches)
library(readr)
AskChicago_comments_keyword_matches <- read_csv("Downloads/ws/ds/data_science_final_project/data/output/AskChicago_comments_keyword_matches.csv")
View(AskChicago_comments_keyword_matches)
colnames(AskChicago_comments_keyword_matches)
colnames(AskChicago_submissions_keyword_matches)
library(readr)
AskChicago_comments_keyword_matches <- read_csv("Downloads/ws/ds/data_science_final_project/data/output/AskChicago_comments_keyword_matches.csv")
View(AskChicago_comments_keyword_matches)
library(readr)
AskChicago_submissions_keyword_matches <- read_csv("Downloads/ws/ds/data_science_final_project/data/output/AskChicago_submissions_keyword_matches.csv")
View(AskChicago_submissions_keyword_matches)
library(readr)
combined_data_x <- read_csv("Downloads/ws/td/text_as_data_final_project/data/combined_data_x.csv")
View(combined_data_x)
library(readr)
x_2024 <- read_csv("Downloads/ws/td/text_as_data_final_project/data/x_2024.csv")
View(x_2024)
library(tidyverse)
dta<-anti_join(combined_data_x,x_2024)
x_2023<-dta%>%
filter(str_detect(calendar_week, "^2023"))
x_2022<-dta%>%str_detect(calendar_week, "^2022")
x_2022<-dta%>%str_detect(calendar_week, "^2022")
x_2022<-dta%>%filter(str_detect(calendar_week, "^2022"))
x_2021<-dta%>%filter(str_detect(calendar_week, "^2021"))
x_2020<-dta%>%filter(str_detect(calendar_week, "^2020"))
x_2019<-dta%>%filter(str_detect(calendar_week, "^2019"))
write_csv(x_2022,"x_2022.csv")
write_csv(x_2023,"x_2023.csv")
write_csv(x_2021,"x_2021.csv")
write_csv(x_2020,"x_2020.csv")
pwd()
sd
gtewd()
getwd)()
getwd()
library(readr)
X_2024_combined <- read_csv("Documents/ws/td/text_as_data_final_project/data/scraper_result_data/combined/2024/X_2024_combined.csv")
View(X_2024_combined)
library(readr)
bws_scores_for_training <- read_csv("Documents/ws/td/text_as_data_final_project/data/processed/bws_scores_for_training.csv")
View(bws_scores_for_training)
library(readr)
bws_scores_for_training <- read_csv("Documents/ws/td/text_as_data_final_project/data/processed/bws_scores_for_training.csv")
View(bws_scores_for_training)
library(readr)
bws_scores <- read_csv("Documents/ws/td/text_as_data_final_project/data/processed/bws_scores.csv")
View(bws_scores)
View(bws_scores)
View(bws_scores_for_training)
View(bws_scores_for_training)
View(bws_scores)
library(readr)
bws_final_dataset <- read_csv("Documents/ws/td/text_as_data_final_project/data/cleaned/bws_final_dataset.csv")
View(bws_final_dataset)
library(readr)
the_dataset <- read_csv("Documents/ws/td/text_as_data_final_project/data/cleaned/the_dataset.csv")
View(the_dataset)
library(readr)
the_dataset <- read_csv("Documents/ws/td/text_as_data_final_project/data/cleaned/the_dataset.csv")
View(the_dataset)
library(pacman)
p_load(tidyverse,ggplot2)
library(pacman)
p_load(tidyverse,ggplot2)
dta<-read_csv("data/cleaned/the_dataset.csv")
View(dta)
colnma
colnames(dta)
model_a<-lm(predicted_bws_score~likes,retweets,comments,views,data=dta)
model_a<-lm(predicted_bws_score~likes+retweets+comments+views,data=dta)
summary(model_a)
ggplot(df, aes(x = score)) +
geom_histogram(
binwidth = 0.01,
fill = "#69b3a2",
color = "white"
) +
theme_minimal() +
labs(title = "Score 分布直方图", x = "分数 (0-1)", y = "频数")
ggplot(dta, aes(x = predicted_bws_score)) +
geom_histogram(
binwidth = 0.01,
fill = "#69b3a2",
color = "white"
) +
theme_minimal() +
labs(title = "Score 分布直方图", x = "分数 (0-1)", y = "频数")
ggplot(dta, aes(x = predicted_bws_score)) +
geom_histogram(
binwidth = 0.01,
fill = "#69b3a2",
color = "white"
) +
theme_minimal()
table(dta$quotes)
library(pacman)
p_load(tidyverse,ggplot2)
dta<-read_csv("data/cleaned/the_dataset.csv")
model_a<-lm(predicted_bws_score~likes+retweets+comments+views,data=dta)
summary(model_a)
ggplot(dta, aes(x = predicted_bws_score)) +
geom_histogram(
binwidth = 0.01,
fill = "#69b3a2",
color = "white"
) +
theme_minimal()
library(readr)
x_2024 <- read_csv("Documents/ws/td/text_as_data_final_project/data/scraper_material_data/x_2024.csv")
View(x_2024)
View(dta)
str(dta$url)
library(readr)
the_dataset <- read_csv("Documents/ws/td/text_as_data_final_project/data/cleaned/the_dataset.csv")
View(the_dataset)
library(readr)
the_dataset <- read_csv("Documents/ws/td/text_as_data_final_project/data/cleaned/the_dataset.csv")
View(the_dataset)
View(X_2024_combined)
View(X_2024_combined)
View(X_2024_combined)
View(x_2024)
View(dta)
library(readr)
the_dataset <- read_csv("Documents/ws/td/text_as_data_final_project/data/cleaned/the_dataset.csv")
View(the_dataset)
x_2024$urls
library(readr)
the_dataset <- read_csv("Documents/ws/td/text_as_data_final_project/data/cleaned/the_dataset.csv")
View(the_dataset)
library(readr)
urls_official_id <- read_csv("Documents/ws/td/text_as_data_final_project/data/cleaned/urls_official_id.csv")
View(urls_official_id)
dta<-read_csv("data/cleaned/the_dataset.csv")
url_officer<-read_csv("data/cleaned/urls_official_id.csv")
library(pacman)
p_load(tidyverse,ggplot2)
dta<-read_csv("data/cleaned/the_dataset.csv")
url_officer<-read_csv("data/cleaned/urls_official_id.csv")
model_a<-lm(predicted_bws_score~likes+retweets+comments+views,data=dta)
summary(model_a)
ggplot(dta, aes(x = predicted_bws_score)) +
geom_histogram(
binwidth = 0.01,
fill = "#69b3a2",
color = "white"
) +
theme_minimal()
colnames(url_officer)
?anti_join
tweet_not_found<-anti_join(url_officer,dta,by="url")
library(pacman)
p_load(tidyverse,ggplot2)
dta<-read_csv("data/cleaned/the_dataset.csv")
url_officer<-read_csv("data/cleaned/urls_official_id.csv")
model_a<-lm(predicted_bws_score~likes+retweets+comments+views,data=dta)
summary(model_a)
ggplot(dta, aes(x = predicted_bws_score)) +
geom_histogram(
binwidth = 0.01,
fill = "#69b3a2",
color = "white"
) +
theme_minimal()
tweet_not_found<-anti_join(url_officer,dta,by="url")
?str
?asstr
??asstr
library(pacman)
p_load(tidyverse,ggplot2)
dta<-read_csv("data/cleaned/the_dataset.csv")
url_officer<-read_csv("data/cleaned/urls_official_id.csv")
url_officer$url <- as.character(url_officer$url)
model_a<-lm(predicted_bws_score~likes+retweets+comments+views,data=dta)
summary(model_a)
ggplot(dta, aes(x = predicted_bws_score)) +
geom_histogram(
binwidth = 0.01,
fill = "#69b3a2",
color = "white"
) +
theme_minimal()
tweet_not_found<-anti_join(url_officer,dta,by="url")
tweet_not_found<-anti_join(dta,url_officer,by="url")
View(tweet_not_found)
tweet_not_found<-anti_join(url_officer,dta,by="url")
tweet_not_found<-anti_join(url_officer,dta,by="url")
tweet_not_found<-anti_join(url_officer,dta,by="url")
library(pacman)
p_load(tidyverse,ggplot2)
dta<-read_csv("data/cleaned/the_dataset.csv")
url_officer<-read_csv("data/cleaned/urls_official_id.csv")
url_officer$url <- as.character(url_officer$url)
model_a<-lm(predicted_bws_score~likes+retweets+comments+views,data=dta)
summary(model_a)
ggplot(dta, aes(x = predicted_bws_score)) +
geom_histogram(
binwidth = 0.01,
fill = "#69b3a2",
color = "white"
) +
theme_minimal()
tweet_not_found<-anti_join(url_officer,dta,by="url")
View(dta)
View(tweet_not_found)
View(url_officer)
dta<-read_csv("data/cleaned/the_dataset.csv")
url_officer<-read_csv("data/cleaned/urls_official_id.csv")
View(url_officer)
dta<-read_csv("data/cleaned/the_dataset.csv")
url_officer<-read_csv("data/cleaned/urls_official_id.csv")
dta<-read_csv("data/cleaned/the_dataset.csv")
url_officer<-read_csv("data/cleaned/urls_official_id.csv")
dta<-read_csv("data/cleaned/the_dataset.csv")
url_officer<-read_csv("data/cleaned/urls_official_id.csv")
url_officer$url<-as.character(url_officer$url)
View(url_officer)
View(url_officer)
head(url_officer,10)
dta<-read_csv("data/cleaned/the_dataset.csv")
url_officer<-read_csv("data/cleaned/urls_official_id.csv",col_types = cols(url = col_character()))
View(url_officer)
tweet_not_found<-anti_join(url_officer,dta,by="url")
install.packages("styler")
View(dta)
str(dta)
sum(is.na(dta$predicted_bws_score))
topic_model <- stm(
documents = out$documents,
vocab = out$vocab,
K = 20,
prevalence = ~ predicted_bws_score + s(date_numeric),
data = out$meta,
init.type = "Spectral",
seed = 114514,
verbose = TRUE
)
out <- prepDocuments(
processed$documents,
processed$vocab,
processed$meta,
lower.thresh = 5
)
?stm
??stm
stm
install.packages("stm")
library(lubridate)
topic_model <- stm(
documents = out$documents,
vocab = out$vocab,
K = 20,
prevalence = ~ predicted_bws_score + s(date_numeric),
data = out$meta,
init.type = "Spectral",
seed = 114514,
verbose = TRUE
)
install.packages("quanteda")
is.na(dta$predicted_bws_score)
sum(is.na(dta$predicted_bws_score))
sum(is.na(dta$datetime))
dta[42841,]
library(readr)
x_2024 <- read_csv("Documents/ws/td/text_as_data_final_project/data/scraper_material_data/x_2024.csv")
View(x_2024)
library(readr)
final_bws_dataset <- read_csv("Documents/ws/td/text_as_data_final_project/data/processed/final_bws_dataset.csv")
View(final_bws_dataset)
library(readr)
bws_final_dataset <- read_csv("Documents/ws/td/text_as_data_final_project/data/processed/bws_final_dataset.csv")
View(bws_final_dataset)
library(readr)
X_2024_combined <- read_csv("Documents/ws/td/text_as_data_final_project/data/scraper_result_data/combined/2024/X_2024_combined.csv")
View(X_2024_combined)
library(readr)
X_2024_combined <- read_csv("Documents/ws/td/text_as_data_final_project/data/scraper_result_data/combined/2024/X_2024_combined.csv")
View(X_2024_combined)
library(readr)
final_bws_dataset <- read_csv("Documents/ws/td/text_as_data_final_project/data/processed/final_bws_dataset.csv")
View(final_bws_dataset)
library(pacman)
p_load(tidyverse,ggplot2)
dta <- read_csv("data/cleaned/the_dataset.csv")
url_officer <- read_csv("data/cleaned/urls_official_id.csv",
col_types = cols(url = col_character()))
model_a<-lm(predicted_bws_score~likes+retweets+comments+views,data=dta)
summary(model_a)
ggplot(dta, aes(x = predicted_bws_score)) +
geom_histogram(
binwidth = 0.01,
fill = "#69b3a2",
color = "white"
) +
theme_minimal()
tweet_not_found<-anti_join(url_officer,dta,by="url")
dta <- read_csv("data/cleaned/the_dataset.csv",
col_types = cols(url = col_character()))
url_officer <- read_csv("data/cleaned/urls_official_id.csv",
col_types = cols(url = col_character()))
library(pacman)
p_load(tidyverse,ggplot2)
dta <- read_csv("data/cleaned/the_dataset.csv",
col_types = cols(url = col_character()))
url_officer <- read_csv("data/cleaned/urls_official_id.csv",
col_types = cols(url = col_character()))
model_a<-lm(predicted_bws_score~likes+retweets+comments+views,data=dta)
summary(model_a)
ggplot(dta, aes(x = predicted_bws_score)) +
geom_histogram(
binwidth = 0.01,
fill = "#69b3a2",
color = "white"
) +
theme_minimal()
tweet_not_found<-anti_join(url_officer,dta,by="url")
View(tweet_not_found)
library(readr)
x_2024 <- read_csv("Documents/ws/td/text_as_data_final_project/data/scraper_material_data/x_2024.csv")
View(x_2024)
library(pacman)
p_load(tidyverse,ggplot2)
dta <- read_csv("data/cleaned/the_dataset.csv",
col_types = cols(url = col_character()))
url_officer <- read_csv("data/cleaned/urls_official_id.csv",
col_types = cols(url = col_character()))
model_a<-lm(predicted_bws_score~likes+retweets+comments+views,data=dta)
summary(model_a)
ggplot(dta, aes(x = predicted_bws_score)) +
geom_histogram(
binwidth = 0.01,
fill = "#69b3a2",
color = "white"
) +
theme_minimal()
tweet_not_found<-anti_join(url_officer,dta,by="url")
View(tweet_not_found)
tweet_not_found<-anti_join(url_officer,dta,by="url")
ggplot(tweet_not_found, aes(x = calendar_week)) +
geom_histogram(
binwidth = 0.01,
fill = "#69b3a2",
color = "white"
) +
theme_minimal()
tweet_not_found<-anti_join(url_officer,dta,by="url")
ggplot(tweet_not_found, aes(x = calendar_week)) +
geom_histogram(
fill = "#69b3a2",
color = "white"
) +
theme_minimal()
tweet_not_found<-anti_join(url_officer,dta,by="url")
ggplot(tweet_not_found, aes(x = calendar_week)) +
geom_histogram(
stat="count"
fill = "#69b3a2",
tweet_not_found<-anti_join(url_officer,dta,by="url")
ggplot(tweet_not_found, aes(x = calendar_week)) +
geom_histogram(
stat="count",
fill = "#69b3a2",
color = "white"
) +
theme_minimal()
tweet_not_found<-anti_join(url_officer,dta,by="url")
ggplot(tweet_not_found, aes(x = calendar_week)) +
geom_histogram(
stat="count",
fill = "#69b3a2",
color = "white"
) +
theme_minimal()+
theme(axis.text.x = element_text(angle = 45, hjust = 1))
table(url_officer$calendar_week
table(url_officer$calendar_week)
View(x_2024)
View(dta)
View(dta)
model_a<-lm(predicted_bws_score~likes+retweets+comments+views,data=dta)
summary(model_a)
vif(model_a)
View(dta)
View(dta)
library(pacman)
p_load(tidyverse,ggplot2,car)
library(readr)
depression_corpus <- read_csv("Documents/ws/ds/data_science_final_project/data/cleaned/depression_corpus.csv")
View(depression_corpus)
library(readr)
depression_corpus <- read_csv("Documents/ws/ds/data_science_final_project/data/cleaned/depression_corpus.csv")
View(depression_corpus)
library(readr)
suicide_corpus <- read_csv("Documents/ws/ds/data_science_final_project/data/cleaned/suicide_corpus.csv")
View(suicide_corpus)
library(readr)
depression_suicide_corpus_predicted <- read_csv("Documents/ws/ds/data_science_final_project/data/cleaned/depression_suicide_corpus_predicted.csv")
View(depression_suicide_corpus_predicted)
sum(is.na(city))
sum(is.na(depression_suicide_corpus_predicted$city))
sum(is.na(depression_suicide_corpus_predicted$source_type))
sum(is.na(depression_suicide_corpus_predicted$id))
sum(is.na(depression_suicide_corpus_predicted$text))
sum(is.na(depression_suicide_corpus_predicted$is_negative))
library(pacman)
library(readxl)
p_load(tidyverse,ggplot2)
dta <- read_excel("data/cleaned/final_data.xlsx")
model_a<-lm(negative_rate~density+income+average_years_schooling + mean_work_hours + mental_health_provider_rate, data= dta)
summary(model_a)
model_b<-lm(negative_submission_rate~density+average_years_schooling+income+ mean_work_hours + mental_health_provider_rate, data= dta)
summary(model_b)
model_c<-lm(negative_comment_rate~density+average_years_schooling+income+ mean_work_hours + mental_health_provider_rate, data= dta)
summary(model_c)
model_test<-lm(negative_rate~density+average_years_schooling+income+ mean_work_hours + mental_health_provider_rate, data= dta)
summary(model_test)
View(depression_suicide_corpus_predicted)
library(readr)
all_words_corpus_predicted <- read_csv("Documents/ws/ds/data_science_final_project/data/cleaned/all_words_corpus_predicted.csv")
View(all_words_corpus_predicted)
View(X_2024_combined)
View(all_words_corpus_predicted)
sum(all_words_corpus_predicted$is_negative)
library(readr)
depression_suicide_corpus_labelled <- read_csv("Documents/ws/ds/data_science_final_project/data/cleaned/depression_suicide_corpus_labelled.csv")
View(depression_suicide_corpus_labelled)
library(readr)
depression_suicide_corpus_predicted <- read_csv("Documents/ws/ds/data_science_final_project/data/cleaned/depression_suicide_corpus_predicted.csv")
View(depression_suicide_corpus_predicted)
sum(depression_suicide_corpus_labelled$is_negative)
sum(depression_suicide_corpus_predicted$is_negative)
setwd("~/Documents/ws/ds/data_science_final_project/data/cleaned")
library(readr)
direct_corpus_labelled <- read_csv("direct_corpus_labelled.csv")
View(direct_corpus_labelled)
library(readr)
depression_suicide_corpus_labelled <- read_csv("depression_suicide_corpus_labelled.csv")
View(depression_suicide_corpus_labelled)
df<-depression_suicide_corpus_labelled+direct_corpus_labelled
library(tidyverse)
df<-full_join(depression_suicide_corpus_labelled,direct_corpus_labelled,by="id")
View(df)
df<-df%>%
distinct()
df<-full_join(depression_suicide_corpus_labelled,direct_corpus_labelled,keep = FALSE)
df<-df%>%
distinct()
write_csv(df,"direct_corpus_labelled_1.csv")
library(readr)
direct_corpus_labelled_1 <- read_csv("direct_corpus_labelled_1.csv")
View(direct_corpus_labelled_1)
View(direct_corpus_labelled)
View(direct_corpus_labelled_1)
sum(direct_corpus_labelled_1$is_negative)
View(direct_corpus_labelled_1)
library(readr)
bws_text_data_openai_labelled <- read_csv("~/Documents/ws/td/text_as_data_final_project/data/processed/bws_text_data_openai_labelled.csv")
View(bws_text_data_openai_labelled)
